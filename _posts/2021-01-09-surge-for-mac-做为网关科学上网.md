---
title: 使用 Surge for Mac 做为网关实现科学上网
tags: 科学上网

---

## 需求分析
- 主路由无法刷写固件或性能较差；
- 局域网内，仅部分设备需要科学上网；
- 部分设备无法安装使用翻墙软件，或配置繁琐；
- 设备使用代理时，部分流量（例如原生安卓系统的系统更新）依然不经过代理。

### 优点
- 省钱：在本身已拥有 Mac 和 Surge 软件的情况下，无需再购入其他设备或软件；
- 简单：Mac 端设置完成后，仅需修改待连接设备的网络配置即可；
- 独立：不会影响同网络环境下的其他设备；
- 完整：确保设备的全部流量都走代理。

### 缺点
- 需要运行 Surge 的 Mac 设备保持在线；
- Mac 端的代理配置将影响所有连接上的设备。

## 如何部署
### 准备工作
正常运行的网络环境（宽带，路由器），运行 macOS 的电脑，Surge for Mac，网线（可有可无）。

### 步骤
#### Mac 端
打开配置好且能够科学上网的 Surge for Mac 软件，开启“增强模式”，如图所示：![截屏2021-01-09 15.09.54](https://i.imgur.com/MEYBb2j.png)
查看 Mac 的 IP 地址（按住 `option` 键，同时用鼠标左键单击上方菜单栏中的 Wi-Fi 图标）：![截屏2021-01-09 15.09.45](https://i.imgur.com/lXecCse.png)
#### 待连接设备端
操作想要通过 Surge for Mac 实现科学上网的设备，进入网络设置（各个系统相似但略有不同），修改如下配置：
- 获取 IP 地址的方式从自动改为手动；
- IP 地址设置为当前内网网段中未被占用的地址；
- 子网掩码保持不变；
- 路由器（网关）填写为上一步中 Mac 的 IP 地址；
- DNS 改为手动，并添加 `198.18.0.2`。

以 iPhone 为例，修改后如图所示：![IMG_7882](https://i.imgur.com/alqDoXC.png)![IMG_7883](https://i.imgur.com/Vj2Gr3k.png)

保存修改，关闭并重新开启 Wi-Fi，连接成功后该设备即实现科学上网。

#### 验证
打开 Surge for Mac 的“请求查看器”，如果配置成功，则可在“远程客户端”中看见对应的 IP 地址，和它发出的请求：![截屏2021-01-09 15.28.49](https://i.imgur.com/opv1muD.png)